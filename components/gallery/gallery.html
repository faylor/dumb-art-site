<link media="screen" type="text/css" rel="stylesheet" href="assets/galleria.css">
<script src="scripts/jquery.galleria.js" type="text/javascript" />
<script type="text/javascript">
  jQuery(function($) {
    $('ul.gallery').galleria();
  });
</script>
<script type="text/javascript">
  jQuery(function($) {

    $('.gallery_demo_unstyled').addClass('gallery_demo'); // adds new class name to maintain degradability

    $('ul.gallery_demo').galleria({
      history: true, // activates the history object for bookmarking, back-button etc.
      clickNext: true, // helper for making the image clickable
      insert: '#main_image', // the containing selector for our main image
      onImage: function(image, caption, thumb) { // let's add some image effects for demonstration purposes

        // fade in the image &amp; caption
        if (!($.browser.mozilla & amp; & amp; navigator.appVersion.indexOf("Win") != -1)) { // FF/Win fades large images terribly slow
          image.css('display', 'none').fadeIn(1000);
        }

        var newHTML = $(caption).html();

        if (newHTML.substr(-4) == 'SOLD') {
          newHTML = newHTML.replace(', SOLD', '&lt;br/&gt;&lt;img src="graphics/reddot.png" alt="SOLD"/&gt;');
        } else {
          var lastComma = newHTML.lastIndexOf(', ');
          newHTML = newHTML.substr(0, lastComma) + "&lt;br/&gt;" + newHTML.substring(lastComma + 1, newHTML.length);
        }
        var lastDash = newHTML.lastIndexOf(' - ');
        newHTML = newHTML.substr(0, lastDash) + "&lt;br/&gt;" + newHTML.substring(lastDash + 2, newHTML.length)

        lastComma = newHTML.lastIndexOf(', ');
        newHTML = newHTML.substr(0, lastComma) + "&lt;br/&gt;" + newHTML.substring(lastComma + 1, newHTML.length);
        $(caption).html(newHTML);
        var w = image.width();
        if (w & gt; 100) {
          caption.css('width', w + 'px');
        }
        caption.css('display', 'none').fadeIn(1000);


        // fetch the thumbnail container
        var _li = thumb.parents('li');
        _li.siblings().children('img.selected').fadeTo(500, 0.3).removeClass('currentSelection');
        thumb.fadeTo('fast', 1).addClass('selected').addClass('currentSelection');
        image.attr('title', 'Next image &gt;&gt;');
      },
      onThumb: function(thumb) { // thumbnail effects goes here
        //var _li = thumb.parents('li');
        var _fadeTo = 1; //_li.is('.active') ? '1' : '1';
        thumb.css({
          display: 'none',
          opacity: _fadeTo
        }).fadeIn(1500);
        thumb.hover(
          function() {
            thumb.fadeTo('fast', 1); //thumb.parents('li').siblings().children('img.selected').not(thumb).fadeTo(500,0.3);
          },
          function() {
            if (thumb.hasClass('selected') & amp; & amp; !thumb.hasClass('currentSelection')) {
              thumb.fadeTo(500, 0.3);
            }
          }
          /*_li.not('.active').children('img').fadeTo('fast',0.7);*/
        )
      }
    });
  });
</script>
<style type="text/css" media="screen,projection">
  /* BEGIN DEMO STYLE */

  * {
    margin: 0;
    padding: 0
  }

  h1,
  h2 {
    font: bold 80% 'helvetica neue', sans-serif;
    letter-spacing: 3px;
    text-transform: uppercase;
  }

  a {
    color: #348;
    text-decoration: none;
    outline: none;
  }

  a:hover {
    color: #67a;
  }

  .caption {
    font-style: italic;
    color: #887;
  }

  .demo {
    position: relative;
    margin-top: -4.3em;
  }

  .gallery_demo {
    width: 910px;
    margin: 30px 0px 10px 60px;
    float: left;
  }

  .gallery_demo li {
    width: 100px;
    /*border:1px solid #111;*/
    margin: 10px;
    box-shadow: 0px 2px 5px #555;
    -webkit-box-shadow: 0px 2px 5px #555;
    -moz-box-shadow: 0px 2px 5px #555;
    /*background:#CCC;*/
  }

  .gallery_demo li div {
    left: 240px
  }

  .gallery_demo li div .caption {
    font: italic 0.7em/1.4 georgia, serif;
  }

  .info {
    text-align: left;
    width: 700px;
    margin: 30px auto;
    border-top: 1px dotted #221;
    padding-top: 30px;
  }

  .info p {
    margin-top: 1.6em;
  }
  .mainImageWrapper {
    margin: 5px auto 40px;
    width: 980px;
}
#main_image {
    float: left;
    width: 870px;
}
</style>
<h2>Di Taylor Gallery</h2>
<div class="demo">
  <div class="mainImageWrapper">
    <div style="width:100%;margin:0px auto 50px;">
      <a href="#" onclick="$.galleria.prev(); return false;" class="prevButton">&laquo;</a>
      <div id="main_image" class="galleria_container">
        <div class="galleria_wrapper">
          <img src="images/lillies400.jpg" class="replaced" style="cursor: pointer;" title="Next image &gt;&gt;">
        </div>
        <div class="caption" style="width: 396px;">
          Lillies<br> Acrylic on Canvas<br> 122 x 122cm<br> $4,000 AUD
        </div>
      </div>
      <a href="#" onclick="$.galleria.next(); return false;" class="nextButton">&raquo;</a>
    </div>
    <ul class="gallery_demo_unstyled gallery_demo galleria">
      <li ng-repeat="painting in filteredPaintings | filter:isForSale | orderBy: 'price'">
        <img class="thumb selected" border="0" title="{{painting.title}}, {{painting.type}} - {{painting.size}}, {{painting.price}}" alt="{{painting.title}}" src="images/thumbs/{{painting.image}}" style="height: auto; width: 100px; margin-top: -9.5px; opacity: 0.3;"
        rel="images/thumbs/{{painting.image}}">
      </li>
    </ul>
  </div>
</div>
</div>

<button type="button" class="btn btn-primary" ng-model="filterSold" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
  Show For Sale Only
</button>
<uib-pagination total-items="totalItems" ng-model="currentPage" items-per-page="itemsPerPage" ng-change="pageChanged()"></uib-pagination>
